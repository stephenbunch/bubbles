/*! typejs v0.1.0 */
!function(){"use strict";function a(a){if(f(a))return a;var b=[];return c(a,function(a){b.push(a)}),b}function b(a,b){for(var c=0;c<a.length&&b.call(void 0,a[c],c)!==!1;c++);}function c(a,b){for(var c in a)if(j(a,c)&&b.call(void 0,a[c],c)===!1)break}function d(a){return null===a?"null":void 0===a?"undefined":Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()}function e(a){return"function"===d(a)}function f(a){return"array"===d(a)}function g(a){return"string"===d(a)}function h(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function i(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)j(a,c)&&b.push(c);return b}function j(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function k(a,c){if(a.indexOf)return a.indexOf(c);var d=-1;return b(a,function(a,b){return a===c?(d=b,!1):void 0}),d}function l(a){if("object"!==d(a)||a.nodeType||"window"===d(a))return!1;try{if(a.constructor&&!j(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0}function m(c,d,e){if(c=a(c),Array.prototype.map)return c.map(d,e);var f=[];b(c,function(a,b){f.push(d.call(e,a,b))})}function n(){return m(arguments,function(a,b){return 0===b?a.replace(/\/$/,""):a.replace(/(^\/|\/$)/g,"")}).join("/")}function o(a,b){return a|=b}function p(a,b){return a&=~b}function q(a,b){return(a&b)===b}function r(a,b){return function(){return a.apply(b,arguments)}}function s(a){e(a)&&(a=a());var b="default",c=function(){if("new"===b)return b="void",new c;if("void"!==b){b="new";var a=c();return b="default",a.ctor.apply(a,arguments),a}};return a.ctor||(a.ctor=function(){}),c.prototype=a,c}function t(a){return nb=!1,gb=o(gb,fb),a(),gb=p(gb,fb),nb}function u(){var b=null,c=!0,d=v(function(){if(q(gb,fb))return nb=!0,void 0;if(q(gb,eb)){null===b&&(b=B(d));var a={parent:null,self:null,mixins:[]};return $?(a.self=I(),H(b,a.self)):a.self=new b,a}if(q(gb,db)&&c){var e;return c=!1,$?(e=I(),H(d,e)):e=new d,K(d,e,arguments,!0),c=!0,e}}),f=a(arguments);if(e(f[0])){var g=function(b,c){return function(){return b.apply(void 0,[d].concat(a(arguments))),c}},h={extend:g(w,h),include:g(z,h),events:g(y,h),members:g(x,h)};f[0].call(h)}else 2===f.length&&(f[0].extend&&w(d,f[0].extend),f[0].include&&z(d,f[0].include),f[0].events&&y(d,f[0].events)),f.length>0&&x(d,f[1]||f[0]);return ob&&ob(d),S(d),d}function v(a){var b=function(){return a.apply(void 0,arguments)};return b.members={},b.parent=null,b.mixins=[],b}function w(a,b){if(i(a.members).length>0)throw V("DefinitionError","Cannot change the base type after members have been defined.");if(!e(b))throw V("TypeError","Base type must be a function.");if(t(b)){for(var c=b;c;){if(c===a)throw V("DefinitionError","Cannot inherit from "+(b===a?"self":"derived type")+".");c=c.parent}a.parent=b}gb=p(gb,db),a.prototype=new b,gb=o(gb,db)}function x(a,b){c(b||[],function(b,c){var d=C(c);if(c=d.name,D(a,d),!S(function(){return E(a,d.name)})){if(c===cb&&(f(b)&&(a.$inject=b,b=b.pop()),!e(b)))throw V("TypeError","Constructor must be a function.");if(a.members[c]={access:d.access,virtual:d.virtual},e(b)?F(a,c,b):G(a,d,b),c===cb&&!a.members.ctor.callsuper&&null!==a.parent&&a.parent.members.ctor&&a.parent.members.ctor.params.length>0)throw V("DefinitionError","Constructor must call the base constructor explicitly because it contains parameters.")}})}function y(a,c){b(c,function(b){var c=C(b);if(b=c.name,D(a,c),b===cb)throw V("DefinitionError","Event cannot be named 'ctor'.");if(c.virtual)throw V("DefinitionError","Events cannot be virtual.");a.members[b]={access:c.access,isEvent:!0}})}function z(a,c){if(a.members.ctor)throw V("DefinitionError","Mixins must be defined before the constructor.");b(c,function(b){if(!t(b))throw V("TypeError","Mixin must be a type.");if(b===a)throw V("DefinitionError","Cannot include self.");A(a,b),a.mixins.push(b)})}function A(a,c){if(a===c)throw V("DefinitionError","Cannot include type that includes self.");b(c.mixins,function(b){A(a,b)})}function B(a){var b=function(){};gb=p(gb,db|eb),b.prototype=new a,gb=o(gb,db|eb);var c=b.prototype;return c._pry=function(b){hb.open(a);var c=b&&b.$scope&&e(b.$scope)?b.$scope():null;return hb.close(),c||b},b}function C(a){var b=a.substr(0,2),c=ib[b]||ib[a[0]]||_,d=jb[b]||jb[a[0]]||!1;return a=a.substr(kb[b]||kb[a[0]]||0),a===cb&&(c=ab,d=!1),{access:c,virtual:d,name:a}}function D(a,b){if(E(a,b.name))throw V("DefinitionError","Member '"+b.name+"' is already defined.");if(b.access!==ab&&null!==a.parent&&a.parent.members[b.name]&&a.parent.members[b.name].access!==b.access)throw V("DefinitionError","Cannot change access modifier of member '"+b.name+"' from "+a.parent.members[b.name].access+" to "+b.access+".")}function E(a,b,c){return!a.members[b]||c&&a.members[b].access===ab||c&&a.members[b].virtual?null!==a.parent?E(a.parent,b,!0):!1:!0}function F(a,c,d){var e=[],f=d.toString().match(/^function\s*\(([^())]+)\)/);null!==f&&b(f[1].split(","),function(a){e.push(h(a))}),a.members[c].method=d,a.members[c].params=e,a.members[c].callsuper=mb.test(d)}function G(a,f,g){"object"!==d(g)&&(g={value:g});var h=0,i={};if(c(g,function(b,c){c=c.toLowerCase();var d=c.substr(0,2);if(jb[d]||jb[c[0]])throw V("DefinitionError","Property '"+f.name+"' cannot have virtual accessors.");var g=ib[d]||ib[c[0]]||f.access;if(lb[g]<lb[f.access])throw V("DefinitionError","The "+c+" accessor of the property '"+f.name+"' cannot have a lower access modifier than the property itself.");if(c=c.substr(kb[d]||kb[c[0]]||0),"get"===c||"set"===c){if(g!==f.access&&h++,null!==a.parent&&a.parent.members[f.name]&&a.parent.members[f.name][c]&&a.parent.members[f.name][c].access!==g)throw V("DefinitionError","Cannot change access modifier of '"+c+"' accessor for property '"+f.name+"' from "+a.parent.members[f.name][c].access+" to "+g+".");if(null!==b&&!e(b))throw V("TypeError",c.substr(0,1).toUpperCase()+c.substr(1)+" accessor for property '"+f.name+"' must be a function or null (uses default implementation.)");i[c]={access:g,method:b}}}),g.get=i.get,g.set=i.set,2===h)throw V("DefinitionError","Cannot set access modifers for both accessors of the property '"+f.name+"'.");g.get||g.set||(g.get={access:f.access},g.set={access:f.access}),g.get&&!e(g.get.method)&&(g.get.method=function(){return this._value()}),g.set&&!e(g.set.method)&&(g.set.method=function(a){this._value(a)}),b([g.get,g.set],function(b,c){if(b){var d=0===c?"get":"set";if(null!==a.parent&&a.parent.members[f.name]&&a.parent.members[f.name].access!==ab&&void 0===a.parent.members[f.name][d])throw V("DefinitionError","Cannot change read/write definition of property '"+f.name+"'.");a.members[f.name][d]={access:b.access,method:b.method,callsuper:mb.test(b.method)}}}),a.members[f.name].value=g.value?g.value:null}function H(a,b){var c=a.prototype;c.constructor.prototype!==c&&H(c.constructor,b);for(var d in c)j(c,d)&&(b[d]=c[d])}function I(){var a,b=document.createElement();for(a in b)j(b,a)&&J(b,a);return b}function J(a,b){var c;Object.defineProperty(a,b,{configurable:!0,get:function(){return c},set:function(a){c=a}})}function K(a,c,d,e){gb=o(gb,eb);var f=a();return gb=p(gb,eb),R(f.self,"_pub",{get:function(){return c}}),L(a,f),Q(a,f,c),c.$scope=function(){return hb.value()===a?f.self:void 0},e&&f.self.ctor.apply(f.self,d),S(function(){function c(a,d){null!==a.parent&&c(a.parent,d.parent),b(a.members,function(a,b){a.method&&d.self[b]()})}c(a,f)}),f.self}function L(a,d){if(b(a.mixins,function(b){K(b,d.self._pub,[],!1),hb.open(b);var c=d.self._pub.$scope();hb.close(),M(b,c,a,d.self),d.mixins.push(c)}),null!==a.parent){if(a.parent.members.ctor&&a.parent.members.ctor.params.length>0&&(!a.members.ctor||!a.members.ctor.callsuper))throw V("InitializationError","Base constructor contains parameters and must be called explicitly.");gb=o(gb,eb),d.parent=a.parent(),gb=p(gb,eb),d.parent.self._pub=d.self._pub,L(a.parent,d.parent)}null!==a.parent&&M(a.parent,d.parent.self,a,d.self),c(a.members,function(b,c){b.method?N(a,d,c,b):b.isEvent?P(a,d,c):O(a,d,c,b)}),d.self.ctor||N(a,d,cb,{callsuper:!1,params:[],access:ab,virtual:!1,name:cb,method:function(){}})}function M(a,b,d,e){c(a.members,function(a,c){if(a.access!==ab&&!d.members[c])if(a.method||a.isEvent)e[c]=b[c];else{var f={};a.get&&a.get.access!==ab&&(f.get=function(){return b[c]}),a.set&&a.set.access!==ab&&(f.set=function(a){b[c]=a}),R(e,c,f)}})}function N(c,d,e,f){if("ctor"===e)d.self.ctor=function(){delete d.self.ctor;var e=[],g={_init:d.self._init,_super:d.self._super};if(b(c.mixins,function(a,b){a.members.ctor&&(a.members.ctor.params.length>0?e.push(a):a.members.ctor.method.call(d.mixins[b]))}),e.length>0&&(d.self._init=function(b){var f=k(e,b);if(-1===f)throw V("InitializationError","Mixin is not defined for this type or has already been initialized.");var g=a(arguments);g.shift(),b.members.ctor.method.apply(d.mixins[k(c.mixins,b)],g),e.splice(f,1)}),null!==c.parent&&c.parent.members.ctor&&(c.parent.members.ctor.params.length>0?d.self._super=d.parent.self.ctor:d.parent.self.ctor()),f.method.apply(d.self,arguments),void 0===g._super?delete d.self._super:d.self._super=g._super,void 0===g._init?delete d.self._init:d.self._init=g._init,e.length>0)throw V("InitializationError","Some mixins were not initialized. Please make sure the constructor calls this._init() for each mixin having parameters in its constructor.")};else if(null!==d.parent&&d.parent.self[e]){var g=d.parent.self[e];d.self[e]=function(){var a=d.self._super;d.self._super=g;var b=f.method.apply(d.self,arguments);return void 0===a?delete d.self._super:d.self._super=a,b}}else d.self[e]=function(){return f.method.apply(d.self,arguments)}}function O(a,b,c,d){function e(a,c){return function(){var d={_super:b.self._super,_value:b.self._value};b.self._super=c,b.self._value=function(a){return arguments.length&&(f=a),f};var e=a.apply(b.self,arguments);return void 0===d._super?delete b.self._super:b.self._super=d._super,void 0===d._value?delete b.self._value:b.self._value=d._value,e}}var f=d.value,g={};d.get&&(g.get=e(d.get.method,null===b.parent?null:function(){return b.parent.self[c]})),d.set&&(g.set=e(d.set.method,null===b.parent?null:function(a){b.parent.self[c]=a})),R(b.self,c,g)}function P(a,b,c){var d=b,e=[],f=[],g={addHandler:function(a,b){var c=b||d.self;e.push(a);var g=function(){a.apply(c,arguments)};f.push(g),S(g)},removeHandler:function(a){var b=k(e,a);b>-1&&(e.splice(b,1),f.splice(b,1))},raise:function(){for(var a=0,b=f.length;b>a;a++)f[a].apply(void 0,arguments)}};R(b.self,c,{get:function(){return g}})}function Q(a,b,d){null!==a.parent&&Q(a.parent,b.parent,d),c(a.members,function(a,c){if(a.access===_)if(a.method)d[c]=b.self[c];else if(a.isEvent){var e={addHandler:function(a){b.self[c].addHandler(a,d)},removeHandler:b.self[c].removeHandler};R(d,c,{get:function(){return e}})}else{var f={};a.get&&a.get.access===_&&(f.get=function(){return b.self[c]}),a.set&&a.set.access===_&&(f.set=function(a){b.self[c]=a}),R(d,c,f)}})}function R(a,b,c){if($||(c.enumerable=!0),c.configurable=!0,$&&j(a,b)&&delete a[b],!Object.defineProperty)throw V("InitializationError","JavaScript properties are not supported by this browser.");Object.defineProperty(a,b,c)}function S(a,b){return b?a():void 0}function T(a){return this instanceof T?(this.value=a,void 0):new T(a)}function U(a){return this instanceof U?(this.value=a,void 0):new U(a)}var V=function(){var a={Error:Error,TypeError:TypeError};return function(b,c){if(!a[b]){var d=function(a){this.message=a};d.prototype=new a.Error,d.prototype.name=b,a[b]=d}return c?new a[b](c):a[b]}}(),W=function(){if(global.setImmediate)return global.setImmediate;var a=[],b="zero-timeout-message",c=function(c){a.push(c),window.postMessage(b,"*")},d=function(c){c.source===window&&c.data===b&&(c.stopPropagation(),a.length>0&&a.shift()())};return window.addEventListener("message",d,!0),c}(),X=function(){function a(a,b,c){for(var e=[{src:c,tmpl:b,dest:a}];e.length;){var f=e.shift();if(f.array)for(var g=0;g<f.array.length;g++)switch(d(f.array[g])){case"object":var h=f.array[g];f.array[g]={},e.push({tmpl:h,dest:f.array[g]});break;case"array":f.array[g]=f.array[g].slice(0),e.push({array:f.array[g]})}else for(var i in f.tmpl)if(void 0!==f.src[i])f.dest[i]=f.src[i];else switch(d(f.tmpl[i])){case"object":f.dest[i]={},e.push({tmpl:f.tmpl[i],dest:f.dest[i]});break;case"array":f.dest[i]=f.tmpl[i].slice(0),e.push({array:f.dest[i]});break;default:f.dest[i]=f.tmpl[i]}}}return function(b){var c="default",d=function(e){if("new"===c)return c="void",new d;if("void"!==c){c="new";var f=d();return c="default",a(f,b,e),f}};return d}}(),Y=new s({ctor:function(){this._pending={},this._cache={},this._browser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),this._last=null,ob=r(this._onTypeDefined,this)},fetch:function(a){var b=new Z;if(this._browser){var c=a.url;if(c=/^\/\//.test(c)?window.location.protocol+c:/^\//.test(c)?window.location.protocol+"//"+window.location.host+c:window.location.protocol+"//"+window.location.host+window.location.pathname+c,this._cache[c])b.resolve(this._cache[c]);else if(this._pending[c])this._pending[c].bind(b);else{var d=document.createElement("script");d.src=c,d.addEventListener("error",function(){b.reject()},!1),document.body.appendChild(d),this._pending[c]=b}}else this._last=b,require(a.url);return b.promise},_onTypeDefined:function(a){if(this._browser){var b=document.getElementsByTagName("script"),c=b[b.length-1].src;if(this._pending[c]){this._cache[c]=a;var d=this._pending[c];delete this._pending[c],setTimeout(function(){d.resolve(a)})}}else if(null!==this._last){var d=this._last;this._last=null,d.resolve(a)}}}),Z=new s(function(){function a(b,c){if(c===b)return b.reject(new TypeError("2.3.1 A promise returned from onFulfilled cannot refer to itself.")),!0;if(c){var d,f=!1;try{j(c,"then")&&(d=c.then)}catch(g){return b.reject(g),!0}if(e(d)){try{d.call(c,function(c){f||(f=!0,a(b,c)||b.resolve(c))},function(a){f||(f=!0,b.reject(a))})}catch(g){f||b.reject(g)}return!0}}}function b(b,c,f){var g=function(g,h){var i,j=g===d?c:f;if(!e(j))return g===d?b.resolve(h):b.reject(h),void 0;try{i=j.call(void 0,h)}catch(k){return b.reject(k),void 0}a(b,i)||b.resolve(i)};return function(){var a=arguments;W(function(){g.apply(void 0,a)})}}var c="pending",d="fulfilled",f="rejected";return{ctor:function(a){function e(a,b){if(h===c){h=a,j=b;for(var d=0;d<i.length;d++)i[d](h,j);i=[]}}var g=this,h=c,i=[],j=null;this.then=function(a,d){var e=new Z,f=b(e,a,d);return h===c?i.push(f):f(h,j),e},this.resolve=function(a){return e(d,a),this},this.reject=function(a){return e(f,a),this},this.promise={then:this.then},a&&W(function(){a.call(void 0,g.resolve,g.reject)})},splat:function(a,b){return this.then(function(b){return a.apply(void 0,b)},b)}}});Z.when=function(c){c=f(c)?c:a(arguments);var d=new Z,e=0,g=[];return b(c,function(a,b){a.then(function(a){g[b]=a,++e===c.length&&d.resolve(g)},function(a){d.reject(a)})}),c.length||d.resolve([]),d.promise};var $=function(){try{return Object.defineProperty({},"x",{}),!1}catch(a){return!0}}(),_="public",ab="private",bb="protected",cb="ctor",db=1,eb=2,fb=4,gb=db,hb=function(){var a=null;return{open:function(b){a=b},close:function(){a=null},value:function(){return a}}}(),ib={__:ab,_:bb},jb={$:!0,_$:!0},kb={__:2,_$:2,_:1,$:1},lb={};lb[_]=1,lb[bb]=2,lb[ab]=3;var mb=/xyz/.test(function(){xyz=0})?/\b_super\b/:/.*/,nb=!1,ob=null,pb=new X({create:function(){},inject:[],filter:[]}),qb=u({ctor:function(a){this.binding=a},asSingleton:function(){var a,b=this.binding.create,c=!1;return this.binding.create=function(){return c||(a=b.apply(void 0,arguments),c=!0),a},this._pub},whenFor:function(a){if(!f(a)||!a.length)throw V("ArgumentError","Expected 'services' to be an array of string.");return this.binding.filter=a.slice(0),this._pub}}),rb=new s({ctor:function(a,b){this._cookbook=a,this._handlers=[],this.missing=[],this.component=null;var c=b instanceof wb?b:this._cookbook.search(b);if(null!==c)this.component=this._prepare(c);else{this.missing.push(b);var d=this;this._onUpdate(b,function(a){d.component=a})}},update:function(a){this.missing.splice(0);for(var b=this._handlers.slice(0),c=0;c<b.length;c++)b[c](a)},_prepare:function(a){for(var b=new tb(a),c=[b];c.length;){var d=c.shift();if(!d.recipe.lazy)for(var e=0;e<d.recipe.ingredients.length;e++){var f=d.recipe.ingredients[e],a=this._cookbook.search(f,d.recipe.name);if(a){var g=new tb(a);g.parent=d,g.order=e,d.children[e]=g,c.push(g)}else this.missing.push(f),this._onUpdate(f,function(a,b){return function(c){c.parent=a,c.order=b,a.children[e]=c}}(d,e))}}return b},_onUpdate:function(a,b){var c=this,d=a instanceof U,e=d||a instanceof T;(d||e)&&(a=a.value);var f=function(g){var h=g[a];if(h){var i=c._cookbook.search(h);i?(i.factory=e,i.lazy=d,b(c._prepare(i))):(c.missing.push(h),c._onUpdate(h,b)),c._handlers.splice(k(c._handlers,f),1)}};this._handlers.push(f)}}),sb=new s({ctor:function(a,b){this._cookbook=a,this._loader=b},create:function(a){function b(){h=i._getRelativePaths(k.missing),i._loader()(h).then(c,g,!1)}function c(a){for(var c={},g=0;g<k.missing.length;g++){var i=k.missing[g].value||k.missing[g],l=a[g];if(!l||!/(string|function|array)/.test(d(l)))return j.reject(new TypeError("Module '"+h[g]+"' loaded successfully. Failed to resolve service '"+i+"'. Expected service to be a string, array, or function. Found '"+(l&&l.toString?l.toString():d(l))+"' instead.")),!1;if(f(l)&&!e(l[l.length-1]))return l=l[l.length-1],j.reject(new TypeError("Module '"+h[g]+"' loaded successfully. Failed to resolve service '"+i+"'. Found array. Expected last element to be a function. Found '"+(l&&l.toString?l.toString():d(l))+"' instead.")),!1;c[i]=a[g]}"rejected"!==j.state&&(k.update(c),k.missing.length?b():j.resolve(k.component))}function g(a){j.reject(a)}var h,i=this,j=new Z,k=new rb(this._cookbook,a);return k.missing.length?this._loader()?b():j.reject(new V("InvalidOperationError","Service(s) "+m(k.missing,function(a){return"'"+a+"'"}).join(", ")+" have not been registered.")):j.resolve(k.component),j.promise},createFactory:function(b){if(b.recipe.lazy)return this._createLazy(b);for(var c=this,d=[],e=b,f=[e];f.length;){var g=f.shift();if(d.push(g),!g.recipe.lazy)for(var h=0;h<g.children.length;h++)f.push(g.children[h])}return d.reverse(),d.pop(),function(){for(var b=0;b<d.length;b++){var f=d[b];f.parent.prep[f.order]=f.recipe.factory?c.createFactory(f):f.recipe.create.apply(void 0,f.prep),f.prep=[]}var g=e.prep.concat(a(arguments));return e.prep=[],e.recipe.create.apply(void 0,g)}},_createLazy:function(a){var b=this,c=null;return function(){var d=arguments;return c?(new Z).resolve(c.apply(void 0,d)).promise:b.create(a.recipe.name).then(function(a){return c=b.createFactory(a),c.apply(void 0,d)},function(a){throw a},!1)}},_getRelativePaths:function(a){return m(a,function(a){return a instanceof T?a=a.value:a instanceof U&&(a=a.value),a.replace(/\./g,"/")})}}),tb=new s({ctor:function(a){this.parent=null,this.order=null,this.prep=[],this.recipe=a,this.children=[]}}),ub=new s({ctor:function(a){this._container=a},search:function(a,b){var c;return e(a)?new wb({create:a,ingredients:(a.$inject||[]).slice(0)}):f(a)?(a=a.slice(0),new wb({create:a.pop(),ingredients:a})):g(a)&&(c=this._lookup(a,b))?new wb({create:c.create,ingredients:c.inject.slice(0),name:a}):a instanceof T&&(c=this._lookup(a.value,b))?new wb({create:c.create,ingredients:c.inject.slice(0),name:a.value,factory:!0}):a instanceof U?(c=this._lookup(a.value,b)||{},new wb({create:c.create||null,ingredients:c.inject?c.inject.slice(0):null,name:a.value,factory:!0,lazy:!0})):null},_lookup:function(a,b){for(var c=this._container[a]||[],d=c.length-1;d>=0;d--)if(b){if(!c[d].filter.length||k(c[d].filter,b)>-1)break}else if(!c[d].filter.length)break;return c[d]||null}}),vb=u(function(){var b=u({ctor:function(a,b){this.kernel=a,this.service=b},to:function(a){return new qb(this.kernel.register(this.service,a))},toConstant:function(a){return new qb(this.kernel.register(this.service,function(){return a}))}}),d=new Y;this.members({ctor:function(){this.container={},this.require=null;var a=this,b=new ub(this.container);this.chef=new sb(b,function(){return a.require})},bind:function(a){if(!a||!g(a))throw V("ArgumentError","Argument 'service' must have a value.");return new b(this,a)},unbind:function(a,b){b=b||[];var c=this.container[a]||[],d=b.length;if(d){for(var e,f,g=0,h=c.length;h>g;g++){if(c[g].filter)for(e=0;d>e;e++)for(f=k(c[g].filter,b[e]);f>-1;)c[g].filter.splice(f,1),f=k(c[g].filter,b[e]);c[g].filter.length||(c.splice(g,1),g--)}c.length||delete this.container[a]}else delete this.container[a];return this._pub},resolve:function(b,c){var d=this;return c=a(arguments),c.shift(0),this.chef.create(b).then(function(a){var b=d.chef.createFactory(a);return a.recipe.factory?b:b.apply(void 0,c)},function(a){throw a})},autoBind:function(a){return this.registerGraph("",a),this._pub},autoLoad:function(a){if(a===!1)this.require=null;else{var b;e(a)?b=a:(g(a)&&(a={baseUrl:a}),a={baseUrl:a.baseUrl||"",waitSeconds:0===a.waitSeconds||a.waitSeconds?a.waitSeconds:7,urlArgs:a.urlArgs||"",scriptType:a.scriptType||"text/javascript"},b=function(b){var c=n(a.baseUrl,b);return/\.js$/.test(c)||(c+=".js"),d.fetch({url:c,timeout:1e3*a.waitSeconds,query:a.urlArgs,scriptType:a.scriptType})}),this.require=function(a){return Z.when(m(a,function(a){var c=b(a);if(!c||!e(c.then))throw V("TypeError","Service loader must return a promise.");return c}))}}},__register:function(a,b){var c=null;if(f(b)){if(b=b.slice(0),c=new pb({create:b.pop(),inject:b}),!e(c.create))throw V("ArgumentError","Expected last array element to be a function.")}else if(c=new pb({create:b,inject:(b.$inject||[]).slice(0)}),!e(c.create))throw V("ArgumentError","Expected provider to be a function.");return this.container[a]=this.container[a]||[],this.container[a].push(c),c},__registerGraph:function(a,b){var d=this,e=""===a?"":a+".";c(b,function(a,b){l(a)?d.registerGraph(e+b,a):d.register(e+b,a)})}})}),wb=new X({create:function(){},ingredients:[],name:null,factory:!1,lazy:!1}),xb={define:u,simple:s,struct:X,error:V,of:d,defer:Z,kernel:vb,factory:T,lazy:U};"undefined"!=typeof module&&module.exports?module.exports=xb:window.type=xb}();