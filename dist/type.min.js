/*! typejs v0.1.0 */
!function(a,b){"use strict";function c(a){var b=a.length,c=f(a);return"window"===f(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){if(h(a))return a;var b=[];return e(a,function(a){b.push(a)}),b}function e(a,d){var e=0;if(c(a))for(;e<a.length&&d.call(b,a[e],e)!==!1;e++);else for(e in a)if(l(a,e)&&d.call(b,a[e],e)===!1)break}function f(a){return null===a?"null":a===b?"undefined":Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()}function g(a){return"function"===f(a)}function h(a){return"array"===f(a)}function i(a){return"string"===f(a)}function j(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function k(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)l(a,c)&&b.push(c);return b}function l(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function m(a,b){if(a.indexOf)return a.indexOf(b);var c=-1;return e(a,function(a,d){return a===b?(c=d,!1):void 0}),c}function n(a){if("object"!==f(a)||a.nodeType||"window"===f(a))return!1;try{if(a.constructor&&!l(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0}function o(a,b,c){if(a=d(a),Array.prototype.map)return a.map(b,c);var f=[];e(a,function(a,d){f.push(b.call(c,a,d))})}function p(a,b){if(a===b)throw new cb("Cannot include type that includes self.");e(b.mixins,function(b){p(a,b)})}function q(a){return P|=O,Q=!1,a(),P&=~O,Q}function r(a){var b=function(){};P&=~(M|N),b.prototype=new a,P|=M|N;var c=b.prototype;return c._pry=function(b){L=a;var c=b&&b.$scope&&g(b.$scope)?b.$scope():null;return L=null,c||b},b}function s(a){var b=a.substr(0,2),c=Z[b]||Z[a[0]]||V,d=$[b]||$[a[0]]||!1;return a=a.substr(_[b]||_[a[0]]||0),a===Y&&(c=W,d=!1),{access:c,isVirtual:d,name:a}}function t(a,b){if(u(a,b.name))throw new cb("Member '"+b.name+"' is already defined.");if(b.access!==W&&null!==a.parent&&a.parent.members[b.name]&&a.parent.members[b.name].access!==b.access)throw new cb("Cannot change access modifier of member '"+name+"' from "+a.parent.members[b.name].access+" to "+b.access+".")}function u(a,b,c){return!a.members[b]||c&&a.members[b].access===W||c&&a.members[b].isVirtual?null!==a.parent?u(a.parent,b,!0):!1:!0}function v(a,b,c){var d=[],f=c.toString().match(/^function\s*\(([^())]+)\)/);null!==f&&e(f[1].split(","),function(a){d.push(j(a))}),a.members[b].method=c,a.members[b].params=d,a.members[b].callsuper=K.test(c)}function w(a,c,d){"object"!==f(d)&&(d={value:d});var h=0,i={};if(e(d,function(b,d){d=d.toLowerCase();var e=d.substr(0,2);if($[e]||$[d[0]])throw new cb("Property '"+c.name+"' cannot have virtual accessors.");var f=Z[e]||Z[d[0]]||c.access;if(ab[f]<ab[c.access])throw new cb("The "+d+" accessor of the property '"+c.name+"' cannot have a lower access modifier than the property itself.");if(d=d.substr(_[e]||_[d[0]]||0),"get"===d||"set"===d){if(f!==c.access&&h++,null!==a.parent&&a.parent.members[c.name]&&a.parent.members[c.name][d]&&a.parent.members[c.name][d].access!==f)throw new cb("Cannot change access modifier of '"+d+"' accessor for property '"+c.name+"' from "+a.parent.members[c.name][d].access+" to "+f+".");if(null!==b&&!g(b))throw new TypeError(d.substr(0,1).toUpperCase()+d.substr(1)+" accessor for property '"+c.name+"' must be a function or null (uses default implementation.)");i[d]={access:f,method:b}}}),d.get=i.get,d.set=i.set,2===h)throw new cb("Cannot set access modifers for both accessors of the property '"+c.name+"'.");d.get||d.set||(d.get={access:c.access},d.set={access:c.access}),d.get&&!g(d.get.method)&&(d.get.method=function(){return this._value()}),d.set&&!g(d.set.method)&&(d.set.method=function(a){this._value(a)}),e([d.get,d.set],function(d,e){if(d){var f=0===e?"get":"set";if(null!==a.parent&&a.parent.members[c.name]&&a.parent.members[c.name].access!==W&&a.parent.members[c.name][f]===b)throw new cb("Cannot change read/write definition of property '"+c.name+"'.");a.members[c.name][f]={access:d.access,method:d.method,callsuper:K.test(d.method)}}}),a.members[c.name].value=d.value?d.value:null}function x(a,b,c,d){P|=N;var e=a();return P&=~N,e.self._pub=b,y(a,e),D(a,e,b),b.$type=a,b.$scope=function(){return L===a?e.self:void 0},d&&e.self.ctor.apply(e.self,c),e.self}function y(a,b){if(e(a.mixins,function(c){x(c,b.self._pub,[],!1),L=c;var d=b.self._pub.$scope();L=null,z(c,d,a,b.self),b.mixins.push(d)}),null!==a.parent){if(a.parent.members.ctor&&a.parent.members.ctor.params.length>0&&(!a.members.ctor||!a.members.ctor.callsuper))throw new db("Base constructor contains parameters and must be called explicitly.");P|=N,b.parent=a.parent(),P&=~N,b.parent.self._pub=b.self._pub,y(a.parent,b.parent)}null!==a.parent&&z(a.parent,b.parent.self,a,b.self),e(a.members,function(c,d){c.method?A(a,b,d,c):c.isEvent?C(a,b,d):B(a,b,d,c)}),b.self.ctor||A(a,b,"ctor",{callsuper:!1,params:[],access:W,isVirtual:!1,name:"ctor",method:function(){}})}function z(a,b,c,d){e(a.members,function(a,e){a.access===W||c.members[e]||(a.method||a.isEvent?d[e]=b[e]:E(d,e,{get:a.get&&a.get.access!==W?function(){return b[e]}:F(e),set:a.set&&a.set.access!==W?function(a){b[e]=a}:G(e)}))})}function A(a,b,c,f){if("ctor"===c)b.self.ctor=function(){delete b.self.ctor;var c=[],g={_init:b.self._init,_super:b.self._super};if(e(a.mixins,function(a,d){a.members.ctor&&(a.members.ctor.params.length>0?c.push(a):a.members.ctor.method.call(b.mixins[d]))}),c.length>0&&(b.self._init=function(e){var f=m(c,e);if(-1===f)throw new db("Mixin is not defined for this type or has already been initialized.");var g=d(arguments);g.shift(),e.members.ctor.method.apply(b.mixins[m(a.mixins,e)],g),c.splice(f,1)}),null!==a.parent&&a.parent.members.ctor&&(a.parent.members.ctor.params.length>0?b.self._super=b.parent.self.ctor:b.parent.self.ctor()),f.method.apply(b.self,arguments),b.self._super=g._super,b.self._init=g._init,c.length>0)throw new db("Some mixins were not initialized. Please make sure the constructor calls this._init() for each mixin having parameters in its constructor.")};else if(null!==b.parent&&b.parent.self[c]&&f.callsuper){var g=b.parent.self[c];b.self[c]=function(){var a=b.self._super;b.self._super=g;var c=f.method.apply(b.self,arguments);return b.self._super=a,c}}else b.self[c]=function(){return f.method.apply(b.self,arguments)}}function B(a,b,c,d){function e(a,c){return function(){var d={_super:b.self._super,_value:b.self._value};b.self._super=c,b.self._value=function(a){return arguments.length&&(f=a),f};var e=a.apply(b.self,arguments);return b.self._super=d._super,b.self._value=d._value,e}}var f=d.value,g={};g.get=d.get?e(d.get.method,d.get.callsuper&&null!==b.parent?function(){return b.parent.self[c]}:null):F(c),g.set=d.set?e(d.set.method,d.set.callsuper&&null!==b.parent?function(a){b.parent.self[c]=a}:null):G(c),E(b.self,c,g)}function C(a,b,c){var d=[];b.self[c]={addHandler:function(a){d.push(a)},removeHandler:function(a){var b=m(d,a);b>-1&&d.splice(b,1)},raise:function(){for(var a=0,c=d.length;c>a;a++)d[a].apply(b.self._pub,arguments)}}}function D(a,b,c){null!==a.parent&&D(a.parent,b.parent,c),e(a.members,function(a,d){a.access===V&&(a.method?c[d]=b.self[d]:a.isEvent?c[d]={addHandler:b.self[d].addHandler,removeHandler:b.self[d].removeHandler}:E(c,d,{get:a.get&&a.get.access===V?function(){return b.self[d]}:F(d),set:a.set&&a.set.access===V?function(a){b.self[d]=a}:G(d)}))})}function E(a,b,c){if(R||(c.enumerable=!0),c.configurable=!0,R&&l(a,b)&&delete a[b],!Object.defineProperty)throw new db("JavaScript properties are not supported by this browser.");Object.defineProperty(a,b,c)}function F(a){return function(){throw new eb("Cannot read from write only property '"+a+"'.")}}function G(a){return function(){throw new eb("Cannot assign to read only property '"+a+"'.")}}function H(a,b){var c=a.prototype;c.constructor.prototype!==c&&H(c.constructor,b);for(var d in c)l(c,d)&&(b[d]=c[d])}function I(){function a(a,b){var c;Object.defineProperty(a,b,{configurable:!0,get:function(){return c},set:function(a){c=a}})}var b,c=document.createElement();for(b in c)l(c,b)&&a(c,b);return c}function J(a,b){if(b===a._pub)return a.set(jb,new TypeError("2.3.1 A promise returned from onFulfilled cannot refer to itself.")),!0;if(b){var c,d=!1;try{l(b,"then")&&(c=b.then)}catch(e){return a.set(jb,e),!0}if(g(c)){try{c.call(b,function(b){d||(d=!0,J(a,b)||a.set(ib,b))},function(b){d||(d=!0,a.set(jb,b))})}catch(e){d||a.set(jb,e)}return!0}}}var K=/xyz/.test(function(){xyz=0})?/\b_super\b/:/.*/,L=null,M=1,N=2,O=4,P=M,Q=!1,R=!1;try{Object.defineProperty({},"x",{})}catch(S){R=!0}var T="Provider`",U="LazyProvider`",V="public",W="private",X="protected",Y="ctor",Z={__:W,_:X},$={$:!0,_$:!0},_={__:2,_$:2,_:1,$:1},ab={};ab[V]=1,ab[X]=2,ab[W]=3;var bb=function(){var a=null,b=!0,c=!1,d=function(){if((P&O)===O)return Q=!0,void 0;if((P&N)===N){null===a&&(a=r(d));var c={parent:null,self:null,mixins:[]};return R?(c.self=I(),H(a,c.self)):c.self=new a,c}if((P&M)===M&&b){var e;return b=!1,R?(e=I(),H(d,e)):e=new d,x(d,e,arguments,!0),b=!0,e}};return d.members={},d.parent=null,d.mixins=[],d.extend=function(a){if(k(d.members).length>0)throw new cb("Cannot change the base type after members have been defined.");if(!g(a))throw new TypeError("Base type must be a function.");if(q(a)){for(var b=a;b;){if(b===d)throw new cb("Cannot inherit from "+(a===d?"self":"derived type")+".");b=b.parent}d.parent=a}return P&=~M,d.prototype=new a,P|=M,d},d.def=function(a){return e(a,function(a,b){var e=s(b);if(b=e.name,t(d,e),b===Y&&(h(a)&&(d.$inject=a,a=a.pop()),!g(a)))throw new TypeError("Constructor must be a function.");if(d.members[b]={access:e.access,isVirtual:e.isVirtual},g(a)?v(d,b,a):w(d,e,a),b===Y){if(!d.members.ctor.callsuper&&null!==d.parent&&d.parent.members.ctor&&d.parent.members.ctor.params.length>0)throw new cb("Constructor must call the base constructor explicitly because it contains parameters.");c=!0}}),d},d.events=function(a){return e(a,function(a){var b=s(a);if(a=b.name,t(d,b),a===Y)throw new cb("Event cannot be named 'ctor'.");if(b.isVirtual)throw new cb("Events cannot be virtual.");d.members[a]={access:b.access,isEvent:!0}}),d},d.include=function(a){if(c)throw new cb("Mixins must be defined before the constructor.");return e(a,function(a){if(!q(a))throw new TypeError("Mixin must be a type.");if(a===d)throw new cb("Cannot include self.");p(d,a),d.mixins.push(a)}),d},d};bb.of=f;var cb=bb.DefinitionError=function(a){this.message=a};cb.prototype=new Error,cb.prototype.name="type.DefinitionError";var db=bb.InitializationError=function(a){this.message=a};db.prototype=new Error,db.prototype.name="type.InitializationError";var eb=bb.AccessViolationError=function(a){this.message=a};eb.prototype=new Error,eb.prototype.name="type.AccessViolationError";var fb=bb.InvalidOperationError=function(a){this.message=a};fb.prototype=new Error,fb.prototype.name="type.InvalidOperationError";var gb=bb.ArgumentError=function(a){this.message=a};gb.prototype=new Error,gb.prototype.name="type.ArgumentError";var hb="pending",ib="fulfilled",jb="rejected",kb=bb().def({ctor:function(){this.queue=[],this.state=hb,this.result=null},value:function(){if(this.state===jb)throw this.result;if(this.state===hb)throw new bb.InvalidOperationError("Promise is still in pending state.");return this.result},then:function(a,b,c){var d=this._pry(new kb);return c=c===!1?!1:!0,this.enqueue(this.handle(d,a,b),c),d._pub},done:function(a,b){return this.then(a,null,b),this._pub},fail:function(a,b){return this.then(null,a,b),this._pub},always:function(a,b){return this.then(a,a,b),this._pub},_set:function(a,b){if(this.state===hb){this.state=a,this.result=b;for(var c=0,d=this.queue.length;d>c;c++)this.queue[c](a,b);this.queue=[]}},__enqueue:function(c,d){if(d){var e=c;c=function(){var c=arguments,d=function(){e.apply(b,c)};a.process&&a.process.nextTick?a.process.nextTick(d):a.setImmediate?a.setImmediate(d):setTimeout(d,0)}}this.state===hb?this.queue.push(c):c(this.state,this.result)},__handle:function(a,c,d){return function(e,f){var h,i=e===ib?c:d;if(!g(i))return a.set(e,f),void 0;try{h=i.call(b,f)}catch(j){return a.set(jb,j),void 0}J(a,h)||a.set(ib,h)}}}),lb=bb.defer=bb().extend(kb).def({ctor:function(){var a=this;this.promise={then:function(){return a.then.apply(a,arguments)},done:function(){return a.done.apply(a,arguments),a.promise},fail:function(){return a.fail.apply(a,arguments),a.promise},always:function(){return a.always.apply(a,arguments),a.promise},value:function(){return a.value()}}},promise:{get:null,__set:null},resolve:function(a){return this.set(ib,a),this._pub},reject:function(a){return this.set(jb,a),this._pub}});lb.when=function(a){var b=new lb,c=h(a)?a:d(arguments),f=0,g=[];return e(c,function(a,d){a.then(function(a){g[d]=a,++f===c.length&&b.resolve(g)},function(a){b.reject(a)},!1)}),c.length||b.resolve([]),b.promise},bb.providerOf=function(a){return T+a},bb.lazyProviderOf=function(a){return U+a},bb.injector=bb().def({ctor:function(){this.container={}},bind:function(a){var c=this;if(!a||!i(a))throw new bb.ArgumentError("Argument 'service' must have a value.");return{to:function(d){var e=c.register(a,d),f={asSingleton:function(){var a,c=e.resolve,d=!1;return e.resolve=function(){return d||(a=c.apply(b,arguments),d=!0),a},f},whenFor:function(a){if(!h(a)||!a.length)throw new gb("Expected 'services' to be an array of string.");return e.filter=a.slice(0),f}};return f}}},unbind:function(a,b){b=b||[];var c=this.container[a]||[],d=b.length;if(d){for(var e,f,g=0,h=c.length;h>g;g++){if(c[g].filter)for(e=0;d>e;e++)for(f=m(c[g].filter,b[e]);f>-1;)c[g].filter.splice(f,1),f=m(c[g].filter,b[e]);c[g].filter.length||(c.splice(g,1),g--)}c.length||delete this.container[a]}else delete this.container[a];return this._pub},resolve:function(a,c){var e=this,f=new lb;return c=d(arguments),c.shift(0),this.resolveTarget(a).then(function(a){var d=e.makeFactory(a);a.theory.isProvider?f.resolve(d):f.resolve(d.apply(b,c))},function(a){f.reject(a)},!1),f.promise},autoBind:function(a){return this.registerGraph("",a),this._pub},__register:function(a,b){var c=null;if(h(b)?(b=b.slice(0),c={resolve:b.pop(),inject:b}):c={resolve:b,inject:(b.$inject||[]).slice(0)},!g(c.resolve)){var d=c.resolve;c.resolve=function(){return d}}return this.container[a]=this.container[a]||[],this.container[a].push(c),c},__registerGraph:function(a,b){var c=this,d=""===a?"":a+".";e(b,function(a,b){n(a)?c.registerGraph(d+b,a):c.register(d+b,a)})},__makeFactory:function(a){function c(a){return{parent:null,position:null,cache:[],recipe:a}}if(a.theory.isLazy)return this.makeLazyFactory(a);for(var f,g=this,h=[],i=c(a),j=[i];j.length;)f=[],e(j,function(a){a.recipe.theory.isLazy||e(a.recipe.dependencies,function(b,d){var e=c(b);e.parent=a,e.position=d,f.push(e)})}),h.push(j),j=f;return h.reverse(),h.pop(),function(){e(h,function(a){e(a,function(a){a.parent.cache[a.position]=a.recipe.theory.isProvider?g.makeFactory(a.recipe):a.recipe.theory.resolve.apply(b,a.cache),a.cache=[]})});var a=i.cache.concat(d(arguments));return i.cache=[],i.recipe.theory.resolve.apply(b,a)}},__makeLazyFactory:function(a){var c=this,d=null;return function(){var e=new lb,f=arguments;return d?e.resolve(d.apply(b,f)):c.resolveTarget(a.theory.name).then(function(a){d=c.makeFactory(a),e.resolve(d.apply(b,f))},function(a){e.reject(a)},!1),e.promise}},__resolveTarget:function(b){function c(){j=o(l.missing,function(a){return a!==T&&new RegExp("^"+T).test(a)?a=a.substr(T.length):a!==U&&new RegExp("^"+U).test(a)&&(a=a.substr(U.length)),a.replace(/\./g,"/")}),require(j,d,i)}function d(){var a={},b=arguments;e(l.missing,function(c,d){var e=b[d];return e&&/(string|function|array)/.test(f(e))?h(e)&&!g(e[e.length-1])?(e=e[e.length-1],k.reject(new TypeError("Module '"+j[d]+"' loaded successfully. Failed to resolve service '"+c+"'. Found array. Expected last element to be a function. Found '"+(e&&e.toString?e.toString():f(e))+"' instead.")),!1):(a[c]=b[d],void 0):(k.reject(new TypeError("Module '"+j[d]+"' loaded successfully. Failed to resolve service '"+c+"'. Expected service to be a string, array, or function. Found '"+(e&&e.toString?e.toString():f(e))+"' instead.")),!1)}),"rejected"!==k.state&&(l.update(a),l.missing.length?c():k.resolve(l.recipe))}function i(a){k.reject(a)}var j,k=new lb,l=this.getExecutionPlan(b);return l.missing.length?a.require?c():k.reject(new fb("Service(s) "+o(l.missing,function(a){return"'"+a+"'"}).join(", ")+" have not been registered.")):k.resolve(l.recipe),k.promise},__getExecutionPlan:function(a){function b(a,c){var e=a!==U&&new RegExp("^"+U).test(a),i=e||a!==T&&new RegExp("^"+T).test(a),j=function(k){var l=k[a];if(l){var n=f.theorize(l);n?(n.isProvider=i,n.isLazy=e,c(d(n))):(g.push(l),b(l,c)),h.splice(m(h,j),1)}};h.push(j)}function c(a){return{theory:a,dependencies:[]}}function d(a){var d=c(a);if(d.theory.isLazy)return d;for(var h,i=[d];i.length;)h=[],e(i,function(a){a.theory.isLazy||e(a.theory.inject,function(d,e){var i=f.evaluate(d,a.theory.name);i?(i=c(i),a.dependencies[e]=i,h.push(i)):(g.push(d),b(d,function(b){a.dependencies[e]=b}))})}),i=h;return d}var f=this,g=[],h=[],i=this.evaluate(a),j=null;i?j=d(i):(g.push(a),b(a,function(a){k.recipe=a}));var k={recipe:j,missing:g,update:function(a){g.splice(0),e(h.slice(0),function(b){b(a)})}};return k},__theorize:function(a){if(!a)return null;var b=null;return g(a)?b={resolve:a,inject:(a.$inject||[]).slice(0)}:h(a)&&(a=a.slice(0),b={resolve:a.pop(),inject:a}),b},__evaluate:function(a,b){function c(a){for(var c=d.container[a]||[],e=c.length-1;e>=0;e--)if(b){if(!c[e].filter||m(c[e].filter,b)>-1)break}else if(!c[e].filter)break;return c[e]||null}var d=this,e=this.theorize(a);if(!e&&i(a)){var f=c(a);f&&(e={resolve:f.resolve,inject:f.inject.slice(0),name:a}),!e&&a!==T&&new RegExp("^"+T).test(a)&&(f=c(a.substr(T.length)),f&&(e={resolve:f.resolve,inject:f.inject.slice(0),name:a.substr(T.length),isProvider:!0})),!e&&a!==U&&new RegExp("^"+U).test(a)&&(f=c(a.substr(U.length))||{},e={resolve:f.resolve||null,inject:f.inject||null,name:a.substr(U.length),isProvider:!0,isLazy:!0},e.inject&&(e.inject=e.inject.slice(0)))}return e}}),"undefined"!=typeof module?module.exports=bb:a.type=bb}(this);