/*! typejs v0.1.0 */
!function(a,b){"use strict";function c(a){var b=a.length,c=f(a);return"window"===f(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=[];return e(a,function(a){b.push(a)}),b}function e(a,b){var d=0;if(c(a))for(;d<a.length&&b.call(a[d],a[d],d)!==!1;d++);else for(d in a)if(j(a,d)&&b.call(a[d],a[d],d)===!1)break}function f(a){return $[a]||Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()}function g(a){return"function"===f(a)}function h(a){return"array"===f(a)}function i(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function j(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function k(a,b){if(a.indexOf)return a.indexOf(b);var c=-1;return e(a,function(a,d){return a===b?(c=d,!1):void 0}),c}function l(a){if("object"!==f(a)||a.nodeType||"window"===f(a))return!1;try{if(a.constructor&&!j(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0}function m(a,b){if(a===b)throw new bb("Cannot include type that includes self.");e(b.mixins,function(b){m(a,b)})}function n(a){return M|=L,N=!1,a(),M&=~L,N}function o(a){var b=function(){};M&=~(J|K),b.prototype=new a,M|=J|K;var c=b.prototype;return c._pry=function(b){I=a;var c=b&&b.$scope&&g(b.$scope)?b.$scope():null;return I=null,c||b},b}function p(a){var b=a.substr(0,2),c=W[b]||W[a[0]]||S,d=X[b]||X[a[0]]||!1;return a=a.substr(Y[b]||Y[a[0]]||0),a===V&&(c=T,d=!1),{access:c,isVirtual:d,name:a}}function q(a,b){if(r(a,b.name))throw new bb("Member '"+b.name+"' is already defined.");if(b.access!==T&&null!==a.parent&&a.parent.members[b.name]&&a.parent.members[b.name].access!==b.access)throw new bb("Cannot change access modifier of member '"+name+"' from "+a.parent.members[b.name].access+" to "+b.access+".")}function r(a,b,c){return!a.members[b]||c&&a.members[b].access===T||c&&a.members[b].isVirtual?null!==a.parent?r(a.parent,b,!0):!1:!0}function s(a,b,c){var d=[],f=c.toString().match(/^function\s*\(([^())]+)\)/);null!==f&&e(f[1].split(","),function(a){d.push(i(a))}),a.members[b].method=c,a.members[b].params=d,a.members[b].callsuper=H.test(c)}function t(a,c,d){"object"!==f(d)&&(d={value:d});var h=0,i={};if(e(d,function(b,d){d=d.toLowerCase();var e=d.substr(0,2);if(X[e]||X[d[0]])throw new bb("Property '"+c.name+"' cannot have virtual accessors.");var f=W[e]||W[d[0]]||c.access;if(Z[f]<Z[c.access])throw new bb("The "+d+" accessor of the property '"+c.name+"' cannot have a lower access modifier than the property itself.");if(d=d.substr(Y[e]||Y[d[0]]||0),"get"===d||"set"===d){if(f!==c.access&&h++,null!==a.parent&&a.parent.members[c.name]&&a.parent.members[c.name][d]&&a.parent.members[c.name][d].access!==f)throw new bb("Cannot change access modifier of '"+d+"' accessor for property '"+c.name+"' from "+a.parent.members[c.name][d].access+" to "+f+".");if(null!==b&&!g(b))throw new TypeError(d.substr(0,1).toUpperCase()+d.substr(1)+" accessor for property '"+c.name+"' must be a function or null (uses default implementation.)");i[d]={access:f,method:b}}}),d.get=i.get,d.set=i.set,2===h)throw new bb("Cannot set access modifers for both accessors of the property '"+c.name+"'.");d.get||d.set||(d.get={access:c.access},d.set={access:c.access}),d.get&&!g(d.get.method)&&(d.get.method=function(){return this._value()}),d.set&&!g(d.set.method)&&(d.set.method=function(a){this._value(a)}),e([d.get,d.set],function(d,e){if(d){var f=0===e?"get":"set";if(null!==a.parent&&a.parent.members[c.name]&&a.parent.members[c.name].access!==T&&a.parent.members[c.name][f]===b)throw new bb("Cannot change read/write definition of property '"+c.name+"'.");a.members[c.name][f]={access:d.access,method:d.method,callsuper:H.test(d.method)}}}),a.members[c.name].value=d.value?d.value:null}function u(a){var b=[];return null!==a.parent&&a.parent.$inject&&(b=b.concat(a.parent.$inject)),e(a.mixins,function(a){a.$inject&&(b=b.concat(a.$inject))}),b}function v(a,b,c,d){M|=K;var e=a();return M&=~K,e.self._pub=b,w(a,e),B(a,e,b),b.$type=a,b.$scope=function(){return I===a?e.self:void 0},d&&e.self.ctor.apply(e.self,c),e.self}function w(a,b){if(e(a.mixins,function(c){v(c,b.self._pub,[],!1),I=c;var d=b.self._pub.$scope();I=null,x(c,d,a,b.self),b.mixins.push(d)}),null!==a.parent){if(a.parent.members.ctor&&a.parent.members.ctor.params.length>0&&(!a.members.ctor||!a.members.ctor.callsuper))throw new cb("Base constructor contains parameters and must be called explicitly.");M|=K,b.parent=a.parent(),M&=~K,b.parent.self._pub=b.self._pub,w(a.parent,b.parent)}null!==a.parent&&x(a.parent,b.parent.self,a,b.self),e(a.members,function(c,d){c.method?y(a,b,d,c):c.isEvent?A(a,b,d):z(a,b,d,c)}),b.self.ctor||y(a,b,"ctor",{callsuper:!1,params:[],access:T,isVirtual:!1,name:"ctor",method:function(){}})}function x(a,b,c,d){e(a.members,function(a,e){a.access===T||c.members[e]||(a.method||a.isEvent?d[e]=b[e]:C(d,e,{get:a.get&&a.get.access!==T?function(){return b[e]}:D(e),set:a.set&&a.set.access!==T?function(a){b[e]=a}:E(e)}))})}function y(a,b,c,f){if("ctor"===c)b.self.ctor=function(){delete b.self.ctor;var c=[],g={_init:b.self._init,_super:b.self._super};if(e(a.mixins,function(a,d){a.members.ctor&&(a.members.ctor.params.length>0?c.push(a):a.members.ctor.method.call(b.mixins[d]))}),c.length>0&&(b.self._init=function(e){var f=k(c,e);if(-1===f)throw new cb("Mixin is not defined for this type or has already been initialized.");var g=d(arguments);g.shift(),e.members.ctor.method.apply(b.mixins[k(a.mixins,e)],g),c.splice(f,1)}),null!==a.parent&&a.parent.members.ctor&&(a.parent.members.ctor.params.length>0?b.self._super=b.parent.self.ctor:b.parent.self.ctor()),f.method.apply(b.self,arguments),b.self._super=g._super,b.self._init=g._init,c.length>0)throw new cb("Some mixins were not initialized. Please make sure the constructor calls this._init() for each mixin having parameters in its constructor.")};else if(null!==b.parent&&b.parent.self[c]&&f.callsuper){var g=b.parent.self[c];b.self[c]=function(){var a=b.self._super;b.self._super=g;var c=f.method.apply(b.self,arguments);return b.self._super=a,c}}else b.self[c]=function(){return f.method.apply(b.self,arguments)}}function z(a,b,c,d){function e(a,c){return function(){var d={_super:b.self._super,_value:b.self._value};b.self._super=c,b.self._value=function(a){return arguments.length&&(f=a),f};var e=a.apply(b.self,arguments);return b.self._super=d._super,b.self._value=d._value,e}}var f=d.value,g={};g.get=d.get?e(d.get.method,d.get.callsuper&&null!==b.parent?function(){return b.parent.self[c]}:null):D(c),g.set=d.set?e(d.set.method,d.set.callsuper&&null!==b.parent?function(a){b.parent.self[c]=a}:null):E(c),C(b.self,c,g)}function A(a,b,c){var d=[];b.self[c]={addHandler:function(a){d.push(a)},removeHandler:function(a){var b=k(d,a);b>-1&&d.splice(b,1)},raise:function(){for(var a=0,c=d.length;c>a;a++)d[a].apply(b.self._pub,arguments)}}}function B(a,b,c){null!==a.parent&&B(a.parent,b.parent,c),e(a.members,function(a,d){a.access===S&&(a.method?c[d]=b.self[d]:a.isEvent?c[d]={addHandler:b.self[d].addHandler,removeHandler:b.self[d].removeHandler}:C(c,d,{get:a.get&&a.get.access===S?function(){return b.self[d]}:D(d),set:a.set&&a.set.access===S?function(a){b.self[d]=a}:E(d)}))})}function C(a,b,c){if(O||(c.enumerable=!0),c.configurable=!0,O&&j(a,b)&&delete a[b],!Object.defineProperty)throw new cb("JavaScript properties are not supported by this browser.");Object.defineProperty(a,b,c)}function D(a){return function(){throw new db("Cannot read from write only property '"+a+"'.")}}function E(a){return function(){throw new db("Cannot assign to read only property '"+a+"'.")}}function F(a,b){var c=a.prototype;c.constructor.prototype!==c&&F(c.constructor,b);for(var d in c)j(c,d)&&(b[d]=c[d])}function G(){function a(a,b){var c;Object.defineProperty(a,b,{configurable:!0,get:function(){return c},set:function(a){c=a}})}var b,c=document.createElement();for(b in c)j(c,b)&&a(c,b);return c}var H=/xyz/.test(function(){xyz=0})?/\b_super\b/:/.*/,I=null,J=1,K=2,L=4,M=J,N=!1,O=!1;try{Object.defineProperty({},"x",{})}catch(P){O=!0}var Q="provider`",R="lazyProvider`",S="public",T="private",U="protected",V="ctor",W={__:T,_:U},X={$:!0,_$:!0},Y={__:2,_$:2,_:1,$:1},Z={};Z[S]=1,Z[U]=2,Z[T]=3;var $={};$[null]="null",$[b]="undefined";var _=Object.keys||function(a){var b=[];for(var c in a)j(a,c)&&b.push(c);return b},ab=a.type=function(){var a=null,b=!0,c=!1,d=function(){if((M&L)===L)return N=!0,void 0;if((M&K)===K){null===a&&(a=o(d));var c={parent:null,self:null,mixins:[]};return O?(c.self=G(),F(a,c.self)):c.self=new a,c}if((M&J)===J&&b){var e;return b=!1,O?(e=G(),F(d,e)):e=new d,v(d,e,arguments,!0),b=!0,e}};return d.members={},d.parent=null,d.mixins=[],d.extend=function(a){if(_(d.members).length>0)throw new bb("Cannot change the base type after members have been defined.");if(!g(a))throw new TypeError("Base type must be a function.");if(n(a)){for(var b=a;b;){if(b===d)throw new bb("Cannot inherit from "+(a===d?"self":"derived type")+".");b=b.parent}d.parent=a}return M&=~J,d.prototype=new a,M|=J,d},d.def=function(a){return e(a,function(a,b){var e=p(b);if(b=e.name,q(d,e),b===V){if(h(a)&&(d.$inject=a,a=a.pop(),"..."===d.$inject[0])){var f=u(d);if(0===f.length)throw new bb("The '...' syntax is invalid when a base type does not exist or has no dependencies.");d.$inject.splice(0,1),d.$inject=f.concat(d.$inject)}if(!g(a))throw new TypeError("Constructor must be a function.")}if(d.members[b]={access:e.access,isVirtual:e.isVirtual},g(a)?s(d,b,a):t(d,e,a),b===V){if(!d.members.ctor.callsuper&&null!==d.parent&&d.parent.members.ctor&&d.parent.members.ctor.params.length>0)throw new bb("Constructor must call the base constructor explicitly because it contains parameters.");c=!0}}),d},d.events=function(a){return e(a,function(a){var b=p(a);if(a=b.name,q(d,b),a===V)throw new bb("Event cannot be named 'ctor'.");if(b.isVirtual)throw new bb("Events cannot be virtual.");d.members[a]={access:b.access,isEvent:!0}}),d},d.include=function(a){if(c)throw new bb("Mixins must be defined before the constructor.");return e(a,function(a){if(!n(a))throw new TypeError("Mixin must be a type.");if(a===d)throw new bb("Cannot include self.");m(d,a),d.mixins.push(a)}),d},d},bb=ab.DefinitionError=function(a){this.message=a};bb.prototype=new Error,bb.prototype.name="type.DefinitionError";var cb=ab.InitializationError=function(a){this.message=a};cb.prototype=new Error,cb.prototype.name="type.InitializationError";var db=ab.AccessViolationError=function(a){this.message=a};db.prototype=new Error,db.prototype.name="type.AccessViolationError";var eb=ab.InvalidOperationError=function(a){this.message=a};eb.prototype=new Error,eb.prototype.name="type.InvalidOperationError";var fb=ab.deferred=ab().def({ctor:function(){this.callbacks={done:[],fail:[]},this.state="pending"},state:{get:null,__set:null},resolve:function(a){return"pending"===this.state&&(this.result=a,this.process("done")),this._pub},reject:function(a){return"pending"===this.state&&(this.result=a,this.process("fail")),this._pub},then:function(a,b){return a&&this.done(a),b&&this.fail(b),this._pub},done:function(a){return"resolved"===this.state?a.call(b,this.result):"pending"===this.state&&this.callbacks.done.push(a),this._pub},fail:function(a){return"rejected"===this.state?a.call(b,this.result):"pending"===this.state&&this.callbacks.fail.push(a),this._pub},always:function(a){return this.done(a),this.fail(a),this._pub},promise:function(){var a=this,b={then:function(){return a.then.apply(a,arguments),b},done:function(){return a.done.apply(a,arguments),b},fail:function(){return a.fail.apply(a,arguments),b},always:function(){return a.always.apply(a,arguments),b}};return b},__process:function(a){for(var c=this,d=this.result,e=0,f=this[a].length;f>e;e++){try{d=callback.call(b,d)}catch(h){this[a]=this[a].slice(e+1),this.reject(h);break}if(d!==b){this.result=d;var i;try{i=d.then}catch(h){this[a]=this[a].slice(e+1),this.reject(h);break}if(g(i)){this[a]=this[a].slice(e+1),i.call(d,function(a){c.resolve(a)},function(a){c.reject(a)});break}}}}});ab.providerOf=function(a){return Q+a},ab.lazyProviderOf=function(a){return R+a},ab.injector=ab().def({ctor:function(){this.container={}},register:function(a,b){var c,d=this;return 1===arguments.length?c=a:(c={},c[a]=b),e(c,function(a,b){if(d.container[b])throw new Error('The service "'+b+'" has already been registered.');if(!g(a))throw new TypeError('The provider for service "'+b+'" must be a function.');d.container[b]={create:a,inject:d.getDependencies(a)}}),d._pub},unregister:function(a){return delete this.container[a],this._pub},resolve:function(a){var b=this,c=this.getBinding(a);if(null===c)throw new Error('Service "'+a+'" not found.');var f=function(){var a=[];return e(c.inject,function(c){a.push(b.resolve(c))}),c.create.apply(c,a.concat(d(arguments)))};if(c.provider)return f;var g=d(arguments);return g.shift(0),f.apply(this,g)},fetch:function(a){var b=this,c=new fb;return this.fetchBinding(a).then(function(){c.resolve(b.resolve.apply(b,arguments))}),c.promise()},constant:function(a,b){var c=this;return 1===arguments.length?(e(a,function(a,b){c.register(b,function(){return a})}),c._pub):c.register(a,function(){return b})},autoRegister:function(a){return this.registerGraph("",a),this._pub},__getBinding:function(a){var b=null;return g(a)?b={create:a,inject:self.getDependencies(a)}:h(a)?b={create:a.pop(),inject:a}:self.container[a]?b=self.container[a]:"string"===f(a)&&(null===b&&a!==Q&&new RegExp("^"+Q).test(a)&&(b=self.container[a.substr(Q.length)]||null,b&&(b.provider=!0)),null===b&&a!==R&&new RegExp("^"+R).test(a)&&(b=self.container[a.substr(R.length)]||null,b&&(b.provider=!0,b.lazy=!0))),b},__fetchBinding:function(a){var b=this,c=new fb,d=this.getBinding(a);if(null===d)require?require([a.replace(".","/")],function(d){b.register(a,d),b.fetchBinding(a).then(function(a){c.resolve(a)},function(a){c.reject(a)})},function(a){c.reject(a)}):c.reject(new Error('Service "'+a+'" not found. Expected "require" to be defined. Could not load service dynamically.'));else if(d.lazy)c.resolve(d);else{var f=0,g=d.inject.length,h=function(){++f===g&&c.resolve(d)};e(d.inject,function(a){b.fetchBinding(a).then(h,function(a){c.reject(a)})})}return c.promise()},__getDependencies:function(a){var b=[];return a.$inject&&(b=a.$inject),b},__registerGraph:function(a,b){var c=this,d=""===a?"":a+".";e(b,function(a,b){g(a)?c.register(d+b,a):l(a)?c.registerGraph(d+b,a):c.register(d+b,function(){return a})})}})}(window);