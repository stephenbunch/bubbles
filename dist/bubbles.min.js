/*! bubbles v0.1.0 */
!function(a,b){function c(a){var b=a.length,c=e.typeOf(a);return"window"===e.typeOf(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=[];return e.each(a,function(a){b.push(a)}),b}var e=a.bb=a.bubbles={},f="bubbles.provider`";e.merge=function(a,c){for(var d,e=0;e<arguments.length;e++)if(0!==e){c=arguments[e];for(d in c)c[d]!==b&&null!==c[d]&&(a[d]=c[d])}return a},e.merge(e,{each:function(a,b){var d,e=0;if(c(a))for(;e<a.length&&(d=b.call(a[e],a[e],e),d!==!1);e++);else for(e in a)if(d=b.call(a[e],a[e],e),d===!1)break},times:function(a,b){var d,e=0;for(c(a)&&(e=a[0],a=a[1]+1);a>e&&(d=b(e),d!==!1);e++);},typeOf:function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()},isFunc:function(a){return"function"===e.typeOf(a)},isArray:function(a){return"array"===e.typeOf(a)},ns:function(a,c){if(c===b||null===c)throw new Error("Cannot create namespace. Space is undefined.");for(var d=0,e=a.split(".");d<e.length;d++)c[e[d]]=c[e[d]]||{},c=c[e[d]];return c},providerOf:function(a){return f+a}}),function(){function a(c,d,e){return c.members[d]===b||e&&"private"===c.members[d].access||e&&c.members[d].virtual?null!==c.parent?a(c.parent,d,!0):!1:!0}function c(a,c,e){var g=d(a);return c.$type=a,c.$scope=function(){return l===a?g.self:void 0},g.self._pub=c,f(a,g),i(a,g,c),g.self.ctor!==b&&g.self.ctor.apply(g.self,e),g.self}function d(a){var b=function(){};return m=!1,b.prototype=new a,m=!0,b.prototype._new=function(){m=!1;var b=c(a,new a,arguments);return m=!0,b},b.prototype._pry=function(b){l=a;var c=b.$scope&&e.isFunc(b.$scope)?b.$scope():null;return l=null,c||null},{self:new b,parent:null}}function f(a,c){if(null!==a.parent){if(a.parent.members.ctor!==b&&a.parent.members.ctor.params.length>0&&(a.members.ctor===b||!a.members.ctor.callsuper))throw new Error("Parent constructor contains parameters and must be called explicitly.");c.parent=d(a.parent),c.parent.self._pub=c.self._pub,f(a.parent,c.parent)}e.each(a.members,function(d,e){d.method!==b?g(a,c,e,d):h(a,c,e,d)}),null!==a.parent&&e.each(a.parent.members,function(d,e){"private"!==d.access&&a.members[e]===b&&(c.self[e]=c.parent.self[e])})}function g(a,c,d,e){if("ctor"===d)c.self.ctor=function(){delete c.self.ctor;var d=c.self._super;null!==a.parent&&a.parent.members.ctor!==b&&(a.parent.members.ctor.params.length>0?c.self._super=c.parent.self.ctor:c.parent.self.ctor()),e.method.apply(c.self,arguments),c.self._super=d};else if(null!==c.parent&&c.parent.self[d]!==b&&e.callsuper){var f=c.parent.self[d];c.self[d]=function(){var a=c.self._super;c.self._super=f;var b=e.method.apply(c.self,arguments);return c.self._super=a,b}}else c.self[d]=function(){return e.method.apply(c.self,arguments)}}function h(a,c,d,e){function f(a,b){return null===b?function(){var b=c.self._value;c.self._value=g;var d=a.apply(c.self,arguments);return g=c.self._value,c.self._value=b,d}:function(){var d=c.self._super,e=c.self._value;c.self._super=b,c.self._value=g;var f=a.apply(c.self,arguments);return c.self._super=d,g=c.self._value,c.self._value=e,f}}var g=e.value,h={};e.get!==b&&(h.get=f(e.get.method,e.get.callsuper&&null!==c.parent?function(){return c.parent.self[d]}:null)),e.set!==b&&(h.set=f(e.set.method,e.set.callsuper&&null!==c.parent?function(a){c.parent.self[d]=a}:null)),j(c.self,d,h)}function i(a,c,d){null!==a.parent&&i(a.parent,c.parent,d),e.each(a.members,function(a,e){if("public"===a.access)if(a.method!==b)d[e]=c.self[e];else{var f={};a.get!==b&&(f.get=function(){return c.self[e]}),a.set!==b&&(f.set=function(a){c.self[e]=a}),j(d,e,f)}})}function j(a,b,c){if(c.configurable=!0,Object.defineProperty)Object.defineProperty(a,b,c);else{if(!a.__defineGetter__)throw new Error("JavaScript properties are not supported by this browser.");a.__defineGetter__(b,c.get),a.__defineSetter__(b,c.set)}}e.types={},e.type=function(d){if(arguments.length>0&&e.types[d]!==b)return e.types[d];var f=!0,g=function(){if(!(this instanceof g)){f=!1;var a=new g;return c(g,a,arguments),f=!0,a}m&&f&&c(g,this,arguments)};arguments.length>0&&(e.types[d]=g);try{Object.defineProperty({},"x",{})}catch(h){g.prototype=document.createElement("fake")}return g.members={},g.parent=null,g.extend=function(a){if(Object.keys(g.members).length>0)throw new Error("Cannot change the base type after members have been defined.");return g.parent=a,m=!1,g.prototype=new a,m=!0,g},g.def=function(c){return e.each(c,function(c,d){if("ctor"===d&&("array"===e.typeOf(c)&&(g.$inject=c,c=c.pop()),!e.isFunc(c)))throw new Error("Constructor must be a function.");var f="public",h=!1;if(null!==d.match(/^__/)?(f="private",d=d.substr(2)):null!==d.match(/^_\$/)?(f="protected",h=!0,d=d.substr(2)):null!==d.match(/^_/)?(f="protected",d=d.substr(1)):null!==d.match(/^\$/)&&(h=!0,d=d.substr(1)),"ctor"===d&&(f="private",h=!1),a(g,d))throw new Error('Member "'+d+'" is already defined.');if("private"!==f&&null!==g.parent&&g.parent.members[d]!==b&&g.parent.members[d].access!==f)throw new Error('Cannot change access modifier of member "'+d+'" from '+g.parent.members[d].access+" to "+f+".");if(g.members[d]={access:f,virtual:h},e.isFunc(c)){var i=[],j=c.toString().match(/^function\s*\(([^())]+)\)/);null!==j&&e.each(j[1].split(","),function(a){i.push(a.trim())}),e.merge(g.members[d],{method:c,params:i,callsuper:k.test(c)})}else(null===c||!e.isFunc(c.get)&&!e.isFunc(c.set))&&(c={get:function(){return this._value},set:function(a){this._value=a},value:c}),e.each([c.get,c.set],function(a,c){var f=0===c?"get":"set";if(a!==b){if(null!==g.parent&&g.parent.members[d]!==b&&"private"!==g.parent.members[d].access&&g.parent.members[d][f]===b)throw new Error('Cannot change read/write definition of property "'+d+'".');if(!e.isFunc(a))throw new Error((0===c?"Get":"Set")+' accessor for property "'+d+'" must be a function.');g.members[d][f]={method:a,callsuper:k.test(a)}}}),g.members[d].value=c.value!==b?c.value:null}),g},g};var k=/xyz/.test(function(){xyz=0})?/\b_super\b/:/.*/,l=null,m=!0}(),e.app=e.type().def({ctor:function(){this.container={}},register:function(a,c){var d,f=this;return 1===arguments.length?d=a:(d={},d[a]=c),e.each(d,function(a,c){if(f.container[c]!==b)throw new Error('The service "'+c+'" has already been registered.');if(!e.isFunc(a))throw new Error('The provider for service "'+c+'" must be a function.');f.container[c]={create:a,inject:f.getDependencies(a)}}),f._pub},unregister:function(a){return delete this.container[a],this._pub},resolve:function(a){var c=this,g=null,h=!1;if(e.isFunc(a))g={create:a,inject:c.getDependencies(a)};else if(e.isArray(a))g={create:a.pop(),inject:a};else if(c.container[a]!==b)g=c.container[a];else if("string"===e.typeOf(a)&&null===g&&a!==f&&null!==a.match(new RegExp("^"+f))&&(h=!0,c.container[a.substr(f.length)]!==b&&(g=c.container[a.substr(f.length)])),null===g)throw new Error('Service "'+a+'" not found.');var i=[];e.each(g.inject,function(a){i.push(c.resolve(a))});var j=d(arguments);j.shift(0);var k=function(){return g.create.apply(g,i.concat(d(arguments)))};return h?k:k.apply(this,j)},constant:function(a,b){var c=this;return 1===arguments.length?(e.each(a,function(a,b){c.register(b,function(){return a})}),c._pub):c.register(a,function(){return b})},autoRegister:function(){var a=this;return e.each(e.types,function(b,c){a.register(c,b)}),a._pub},__getDependencies:function(a){var c=[];return a.$inject!==b&&(c=a.$inject),c}}),e.hub=e.type().def({ctor:function(a){var b=this;b.context=a||b._pub,b.handlers={}},on:function(a,c){var d=this;return a=d.parse(a),d.handlers[a.name]===b&&(d.handlers[a.name]=[]),d.handlers[a.name].push({ns:a.ns,callback:c}),d._pub},off:function(a){var c=this;return a=c.parse(a),null===a.ns?delete c.handlers[a.name]:c.handlers[a.name]!==b&&e.each(c.handlers[a.name],function(b,d){c.match(a.ns,b.ns)&&c.handlers[a.name].splice(d,1)}),c._pub},fire:function(a){var c=this,f=d(arguments);return a=c.parse(a),f.shift(),c.handlers[a.name]!==b&&(null===a.ns?e.each(c.handlers[a.name],function(a){a.callback.apply(c.context,f)}):e.each(c.handlers[a.name],function(b){c.match(a.ns,b.ns)&&b.callback.apply(c.context,f)})),c._pub},__parse:function(a){var b=a.indexOf("."),c={};return b>-1?(c.name=a.substr(0,b),c.ns=a.substr(b+1)):(c.name=a,c.ns=null),c},__match:function(a,b){return a===b||!!a&&!!b&&b.length>a.length&&0===b.indexOf(a)&&"."===b[a.length]}})}(window);