/*! Bubbles v0.1.0 */
!function(a,b){function c(a){var b=a.length,c=e.typeOf(a);return"window"===e.typeOf(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=[];return e.each(a,function(a){b.push(a)}),b}var e=a.bubbles={};e.merge=function(a,c){for(var d,e=0;e<arguments.length;e++)if(0!==e){c=arguments[e];for(d in c)c[d]!==b&&null!==c[d]&&(a[d]=c[d])}return a},e.merge(e,{each:function(a,b){var d,e=0;if(c(a))for(;e<a.length&&(d=b.call(a[e],a[e],e),d!==!1);e++);else for(e in a)if(d=b.call(a[e],a[e],e),d===!1)break},times:function(a,b){var d,e=0;for(c(a)&&(e=a[0],a=a[1]+1);a>e&&(d=b(e),d!==!1);e++);},typeOf:function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()},isFunc:function(a){return"function"===e.typeOf(a)},isArray:function(a){return"array"===e.typeOf(a)},ns:function(a,c){if(c===b||null===c)throw new Error("Cannot create namespace. Space is undefined.");for(var d=0,e=a.split(".");d<e.length;d++)c[e[d]]=c[e[d]]||{},c=c[e[d]];return c}}),function(){function a(c,d,e){return c.members[d]===b||e&&"private"===c.members[d].access||e&&c.members[d].virtual?null!==c.parent?a(c.parent,d,!0):!1:!0}function c(a,c,e){var g=d(a);return c.$type=a,c.$scope=function(){return j===a?g.self:void 0},g.self._pub=c,f(a,g),h(a,g,c),g.self.ctor!==b&&g.self.ctor.apply(g.self,e),g.self}function d(a){var b=function(){};return a.initializing=!0,b.prototype=new a,a.initializing=!1,b.prototype._new=function(){a.initializing=!0;var b=c(a,new a,arguments);return a.initializing=!1,b},b.prototype._pry=function(b){j=a;var c=b.$scope&&e.isFunc(b.$scope)?b.$scope():null;return j=null,c||null},{self:new b,parent:null}}function f(a,c){if(null!==a.parent){if(a.parent.members.ctor!==b&&a.parent.members.ctor.params.length>0&&(a.members.ctor===b||!a.members.ctor.callsuper))throw new Error("Parent constructor contains parameters and must be called explicitly.");c.parent=d(a.parent),c.parent.self._pub=c.self._pub,f(a.parent,c.parent)}e.each(a.members,function(b,d){g(a,c,d,b)}),null!==a.parent&&e.each(a.parent.members,function(d,e){"private"!==d.access&&a.members[e]===b&&(c.self[e]=c.parent.self[e])})}function g(a,c,d,e){if("ctor"===d)c.self.ctor=function(){delete c.self.ctor;var d=c.self._super;null!==a.parent&&a.parent.members.ctor!==b&&(a.parent.members.ctor.params.length>0?c.self._super=c.parent.self.ctor:c.parent.self.ctor()),e.method.apply(c.self,arguments),c.self._super=d};else if(null!==c.parent&&c.parent.self[d]!==b&&e.callsuper){var f=c.parent.self[d];c.self[d]=function(){var a=c.self._super;c.self._super=f;var b=e.method.apply(c.self,arguments);return c.self._super=a,b}}else c.self[d]=function(){return e.method.apply(c.self,arguments)}}function h(a,b,c){null!==a.parent&&h(a.parent,b.parent,c),e.each(a.members,function(a,d){"public"===a.access&&(c[d]=b.self[d])})}e.type=function(){var d=function(){if(!(this instanceof d)){d.initializing=!0;var a=new d;return c(d,a,arguments),d.initializing=!1,a}d.initializing||c(d,this,arguments)};return d.initializing=!1,d.members={},d.parent=null,d.extend=function(a){if(Object.keys(d.members).length>0)throw new Error("Cannot change the base type after members have been defined.");return d.parent=a,a.initializing=!0,d.prototype=new a,a.initializing=!1,d},d.def=function(c){return e.each(c,function(c,f){if("ctor"===f&&"array"===e.typeOf(c)&&(d.$inject=c,c=c.pop()),!e.isFunc(c))throw new Error('Cannot define member "'+f+'" because it is not a function. Variables should be defined in the constructor.');var g="public",h=!1;if(null!==f.match(/^__/)?(g="private",f=f.substr(2)):null!==f.match(/^_\$/)?(g="protected",h=!0,f=f.substr(2)):null!==f.match(/^_/)?(g="protected",f=f.substr(1)):null!==f.match(/^\$/)&&(h=!0,f=f.substr(1)),"ctor"===f&&(g="private",h=!1),a(d,f))throw new Error('Member "'+f+'" is already defined.');if("private"!==g&&null!==d.parent&&d.parent.members[f]!==b&&d.parent.members[f].access!==g)throw new Error('Cannot change access modifier of member "'+f+'" from '+d.parent.members[f].access+" to "+g+".");var j=i.test(c),k=[],l=c.toString().match(/^function\s*\(([^())]+)\)/);null!==l&&e.each(l[1].split(","),function(a){k.push(a.trim())}),d.members[f]={access:g,method:c,callsuper:j,virtual:h,params:k}}),d},d};var i=/xyz/.test(function(){xyz=0})?/\b_super\b/:/.*/,j=null}(),e.app=e.type().def({ctor:function(){this.container={},this.namespace=null},register:function(a,c){var d,f=this;return 1===arguments.length?d=a:(d={},d[a]=c),e.each(d,function(a,c){if(f.container[c]!==b)throw new Error('The service "'+c+'" has already been bound.');if(!e.isFunc(a))throw new Error('The factory to create the service "'+c+'" must be a function.');f.container[c]={create:a,inject:f.getDependencies(a)}}),f._pub},unregister:function(a){return delete this.container[a],this._pub},resolve:function(a){var c=this,f=null,g=!1;if(e.isFunc(a))f={create:a,inject:c.getDependencies(a)};else if(e.isArray(a))f={create:a.pop(),inject:a};else if(c.container[a]!==b)f=c.container[a];else if("string"===e.typeOf(a)&&(f=c.findBinding(a),null===f&&"$"!==a&&null!==a.match(/^\$/)&&(g=!0,f=c.container[a.substr(1)]!==b?c.container[a.substr(1)]:c.findBinding(a.substr(1)))),null===f)throw new Error('Service "'+a+'" not found.');var h=[];e.each(f.inject,function(a){h.push(c.resolve(a))});var i=d(arguments);i.shift(0);var j=function(){return f.create.apply(f,h.concat(d(arguments)))};return g?j:j.apply(this,i)},use:function(a){return this.namespace=a,this._pub},constant:function(a,b){var c=this;return 1===arguments.length?(e.each(a,function(a,b){c.register(b,function(){return a})}),c._pub):c.register(a,function(){return b})},require:function(){var a=this;return e.each(arguments,function(b){e.run(b,a._pub)}),a._pub},__getDependencies:function(a){var c=[];return a.$inject!==b&&(c=a.$inject),c},__findBinding:function(a){var c=this;if(null===c.namespace)return null;var d=a.split("."),f=d.pop(),g=e.ns(d.join("."),c.namespace);return g[f]!==b&&e.isFunc(g[f])?{create:g[f],inject:c.getDependencies(g[f])}:null}}),e.hub=e.type().def({ctor:function(a){var b=this;b.context=a||b._pub,b.handlers={}},on:function(a,c){var d=this;return a=d.parse(a),d.handlers[a.name]===b&&(d.handlers[a.name]=[]),d.handlers[a.name].push({ns:a.ns,callback:c}),d._pub},off:function(a){var c=this;return a=c.parse(a),null===a.ns?delete c.handlers[a.name]:c.handlers[a.name]!==b&&e.each(c.handlers[a.name],function(b,d){c.match(a.ns,b.ns)&&c.handlers[a.name].splice(d,1)}),c._pub},fire:function(a){var c=this,f=d(arguments);return a=c.parse(a),f.shift(),c.handlers[a.name]!==b&&(null===a.ns?e.each(c.handlers[a.name],function(a){a.callback.apply(c.context,f)}):e.each(c.handlers[a.name],function(b){c.match(a.ns,b.ns)&&b.callback.apply(c.context,f)})),c._pub},__parse:function(a){var b=a.indexOf("."),c={};return b>-1?(c.name=a.substr(0,b),c.ns=a.substr(b+1)):(c.name=a,c.ns=null),c},__match:function(a,b){return a===b||!!a&&!!b&&b.length>a.length&&0===b.indexOf(a)&&"."===b[a.length]}}),function(){var b=e.hub(a);e.merge(e,{add:function(a,c){var d=c;if("array"===e.typeOf(c)&&(d=c.pop(),d.$inject=c),"function"!==e.typeOf(d))throw new Error("No callback specified.");return b.on("run."+a,function(a){a.resolve(d)}),e},remove:function(a){return b.off("run."+a),e},run:function(a,c){return b.fire("run."+a,c),e}})}()}(window);